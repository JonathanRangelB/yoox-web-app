<form [formGroup]="mainForm" (ngSubmit)="onSubmit()">
  <p-stepper orientation="vertical" style="max-width: 720px; margin: 0 auto">
    <p-stepperPanel header="Cantidades y plazos">
      <ng-template
        pTemplate="content"
        let-index="index"
        let-nextCallback="nextCallback">
        <p>Todos los campos son obligatorios</p>
        <div class="grid py-3 pr-2" style="margin-right: 0">
          <!-- inicio de cantidades y plazos -->
          <div class="col-12 sm:col-4 flex flex-column">
            <label for="cantidad">Cantidad a prestar</label>
            <p-inputNumber
              inputId="cantidad"
              formControlName="cantidad"
              placeholder="Cantidad"
              mode="currency"
              currency="MXN"
              locale="es-MX"
              maxFractionDigits="0"
              showClear="true"
              [style]="{ width: '100%' }"
              [inputStyle]="{ width: '100%' }"
              (onInput)="onInputCantidad($event)" />
            <small
              id="cantidad-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('cantidad')">
              <ng-container
                *ngIf="mainForm.get('cantidad')?.errors?.['required']">
                Cantidad requerida</ng-container
              >
              <ng-container *ngIf="mainForm.get('cantidad')?.errors?.['min']">
                Cantidad minima de 1000</ng-container
              >
            </small>
          </div>
          <div class="col-12 sm:col-4 flex flex-column">
            <label for="plazos">Plazo</label>
            <p-dropdown
              inputId="plazos"
              id="plazos"
              formControlName="plazos"
              [options]="plazos"
              optionLabel="name"
              (onChange)="onPlazoChanged($event)"
              placeholder="Plazo de semanas"
              [style]="{ width: '100%' }" />
            <small
              id="plazos-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('plazos')"
              >Selecciona un plazo</small
            >
          </div>
          <div class="col-12 sm:col-4 flex flex-column">
            <label for="fechaInicial">Fecha inicial</label>
            <p-calendar
              inputId="fechaInicial"
              formControlName="fechaInicial"
              placeholder="dd/mm/aaaa"
              [iconDisplay]="'input'"
              [showIcon]="true"
              [showButtonBar]="true"
              (onSelect)="calculaDiaDeLaSemana($event)"
              dateFormat="dd/mm/yy"
              readonlyInput="true"
              [minDate]="fechaMinima"
              [style]="{ width: '100%' }" />
            <small
              id="fechaInicial-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('fechaInicial')"
              >Fecha Inicial requerida</small
            >
          </div>

          <!-- inicio valores calculados -->
          <p-inputGroup [style]="{ width: '99%' }">
            <p-inputGroupAddon>
              <i class="pi pi-money-bill"></i>
              <span> Cada semana se pagarian:</span>
            </p-inputGroupAddon>
            <input
              pInputText
              disabled="true"
              id="cantidadSemanal"
              placeholder="Cantidad semanal"
              style="color: green; font-weight: bold"
              [value]="pagoSemanal" />
          </p-inputGroup>
          <p-inputGroup [style]="{ width: '99%' }">
            <p-inputGroupAddon>
              <i class="pi pi-percentage"></i>
              <span> Tasa de interes:</span>
            </p-inputGroupAddon>
            <input
              disabled="true"
              pInputText
              id="tasaDeInteres"
              placeholder="Tasa de interes"
              [value]="tasaDeInteres" />
          </p-inputGroup>
          <p-inputGroup [style]="{ width: '99%' }">
            <p-inputGroupAddon>
              <i class="pi pi-wallet"></i>
              <span> Total a pagar:</span>
            </p-inputGroupAddon>
            <input
              pInputText
              disabled="true"
              id="cantidadTotal"
              placeholder="Cantidad total a pagar"
              style="color: green; font-weight: bold"
              [value]="totalAPagar" />
          </p-inputGroup>
          <p-inputGroup [style]="{ width: '99%' }">
            <p-inputGroupAddon>
              <i class="pi pi-receipt"></i>
              <span> Pagaria los dias:</span>
            </p-inputGroupAddon>
            <input
              pInputText
              disabled="true"
              id="diaDeLaSemana"
              placeholder="Dia de la semana que se abona"
              [value]="diaDeLaSemana" />
          </p-inputGroup>
          <p-inputGroup [style]="{ width: '99%' }">
            <p-inputGroupAddon>
              <i class="pi pi-calendar-clock"></i>
              <span> Fecha final estimada:</span>
            </p-inputGroupAddon>
            <input
              type="text"
              pInputText
              id="fechaFinal"
              placeholder="Fecha final estimada"
              disabled="true"
              [value]="fechaFinal" />
          </p-inputGroup>
          <!-- final de valores calculados -->
        </div>
        <div class="flex justify-content-end pb-4 gap-2 pr-3">
          <p-button
            label="Siguiente"
            icon="pi pi-angle-double-right"
            iconPos="right"
            (onClick)="nextCallback.emit()" />
        </div>
      </ng-template>
    </p-stepperPanel>
    <!-- fin de Cantidades y plazos -->

    <!-- inicio de Datos del ciente -->
    <p-stepperPanel header="Datos del cliente">
      <ng-template
        pTemplate="content"
        let-prevCallback="prevCallback"
        let-nextCallback="nextCallback"
        let-index="index">
        <div class="grid py-3 pr-3">
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="nombreCliente">Nombre cliente</label>
            <input
              formControlName="nombreCliente"
              pInputText
              id="nombreCliente"
              aria-describedby="nombreCliente-help" />
            <small
              class="mb-2 text-red-500"
              id="nombreCliente-help"
              [hidden]="esCampoOculto('nombreCliente')"
              >Nombre de cliente requerido</small
            >
          </div>

          <div class="col-12 sm:col-6 flex flex-column">
            <label for="apellidoPaternoCliente">Apellido paterno</label>
            <input
              formControlName="apellidoPaternoCliente"
              pInputText
              id="apellidoPaternoCliente"
              aria-describedby="apellidoPaternoCliente-help" />
            <small
              class="mb-2 text-red-500"
              id="apellidoPaternoCliente-help"
              [hidden]="esCampoOculto('apellidoPaternoCliente')"
              >Apellido paterno requerido</small
            >
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="apellidoMaternoCliente">Apellido materno</label>
            <input
              formControlName="apellidoMaternoCliente"
              pInputText
              id="apellidoMaternoCliente"
              aria-describedby="apellidoMaternoCliente-help" />
            <small
              id="apellidoMaternoCliente-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('apellidoMaternoCliente')"
              >Apellido materno requerido</small
            >
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="telefonoFijoCliente">Telefono fijo</label>
            <p-inputMask
              formControlName="telefonoFijoCliente"
              inputId="telefonoFijoCliente"
              mask="999-999-9999"
              unmask="true"
              showClear="true"
              [autoClear]="false"
              placeholder="999-999-9999"
              [style]="{ width: '100%' }" />
            <small
              id="telefonoFijoCliente-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('telefonoFijoCliente')"
              >Telefono fijo requerido</small
            >
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="telefonoMovilCliente">Telefono movil</label>
            <p-inputMask
              formControlName="telefonoMovilCliente"
              inputId="telefonoMovilCliente"
              mask="999-999-9999"
              unmask="true"
              showClear="true"
              [autoClear]="false"
              placeholder="999-999-9999"
              [style]="{ width: '100%' }" />
            <small
              id="telefonoMovilCliente-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('telefonoMovilCliente')"
              >Telefono movil Requerido</small
            >
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="emailCliente">Correo electronico</label>
            <input
              pInputText
              formControlName="correoCliente"
              id="emailCliente"
              aria-describedby="emailCliente-help" />
            <small
              id="correoCliente-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('correoCliente')"
              ><ng-container
                *ngIf="mainForm.get('correoCliente')?.errors?.['required']">
                Correo electronico requerido</ng-container
              >
              <ng-container
                *ngIf="mainForm.get('correoCliente')?.errors?.['invalidEmail']">
                Formato de correo invalido</ng-container
              ></small
            >
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="ocupacionCliente">Ocupacion</label>
            <input
              pInputText
              formControlName="ocupacionCliente"
              id="ocupacionCliente"
              aria-describedby="ocupacionCliente-help" />
            <small id="ocupacionCliente-help" [hidden]="true">ocupacion</small>
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="curpCliente">CURP</label>
            <p-inputMask
              mask="aaaa-999999-aaaaaa-99"
              inputId="curpCliente"
              unmask="true"
              showClear="true"
              formControlName="curpCliente"
              placeholder="0000-000000-000000-00"
              [style]="{ width: '100%' }" />
            <small
              id="curpCliente-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('curpCliente')"
              ><ng-container
                *ngIf="mainForm.get('curpCliente')?.errors?.['required']">
                CURP requerido</ng-container
              >
              <ng-container
                *ngIf="mainForm.get('curpCliente')?.errors?.['invalidCurp']">
                Formato de CURP invalido</ng-container
              >
            </small>
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="tipoCalle">Tipo de calle</label>
            <p-dropdown
              inputId="tipoCalle"
              id="tipoCalle"
              formControlName="tipoCalleCliente"
              [options]="tiposCalle"
              optionLabel="name"
              [showClear]="true"
              placeholder="Selecciona el tipo de calle"
              [style]="{ width: '100%' }" />
            <small
              id="tipoCalle-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('tipoCalleCliente')"
              >Selecciona un tipo de calle</small
            >
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="nombreCalleCliente">Nombre de la calle</label>
            <input
              pInputText
              formControlName="nombreCalleCliente"
              id="nombreCalleCliente"
              aria-describedby="nombreCalleCliente-help" />
            <small
              id="nombreCalleCliente-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('nombreCalleCliente')"
              >Nombre de calle es requerido</small
            >
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="numeroExteriorCliente">Número Exterior</label>
            <p-inputNumber
              formControlName="numeroExteriorCliente"
              showClear="true"
              [style]="{ width: '100%' }"
              [inputStyle]="{ width: '100%' }"
              inputId="numeroExteriorCliente"
              aria-describedby="numeroExteriorCliente-help" />
            <small
              id="numeroExteriorCliente-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('numeroExteriorCliente')"
              >El numero de exterior es requerido</small
            >
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="numeroInterior">Número Interior</label>
            <p-inputNumber
              inputId="numeroInteriorCliente"
              formControlName="numeroInteriorCliente"
              showClear="true"
              [style]="{ width: '100%' }"
              [inputStyle]="{ width: '100%' }"
              aria-describedby="numeroInterior-help" />
            <small id="numeroInterior-help" [hidden]="true">placeholder</small>
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="coloniaCliente">Colonia</label>
            <input
              pInputText
              id="coloniaCliente"
              aria-describedby="coloniaCliente-help"
              formControlName="coloniaCliente" />
            <small
              id="coloniaCliente-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('coloniaCliente')"
              >La colonia es requerida</small
            >
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="municipioCliente">Municipio</label>
            <input
              pInputText
              formControlName="municipioCliente"
              id="municipioCliente"
              aria-describedby="municipioCliente-help" />
            <small
              id="municipioCliente-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('municipioCliente')"
              >Municipio Requerido</small
            >
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="estadoCliente">Entidad Federativa</label>
            <p-dropdown
              [options]="estadosDeLaRepublica"
              inputId="estadoCliente"
              id="estadoCliente"
              emptyFilterMessage="Sin resultados"
              formControlName="estadoCliente"
              optionLabel="name"
              [filter]="true"
              filterBy="name"
              [showClear]="true"
              placeholder="Selecciona un estado"
              [style]="{ width: '100%' }" />
            <small
              id="estadoCliente-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('estadoCliente')"
              >El estado es requerido</small
            >
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="codigoPostalCliente">Código postal</label>
            <p-inputNumber
              inputId="codigoPostalCliente"
              formControlName="codigoPostalCliente"
              autoClear="false"
              showClear="true"
              useGrouping="false"
              placeholder="99999"
              [maxlength]="5"
              [style]="{ width: '100%' }" />
            <small
              id="codigoPostalCliente-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('codigoPostalCliente')"
              ><ng-container
                *ngIf="
                  mainForm.get('codigoPostalCliente')?.errors?.['required']
                ">
                Código postal requerido</ng-container
              >
              <ng-container
                *ngIf="
                  mainForm.get('codigoPostalCliente')?.errors?.[
                    'lenghtNotMatch'
                  ]
                ">
                El número debe de tener 5 digitos</ng-container
              ></small
            >
          </div>
          <div class="col-12 flex flex-column gap-2">
            <label for="observacionesCliente">Observaciones adicionales</label>
            <textarea
              formControlName="observacionesCliente"
              rows="5"
              cols="30"
              autoResize="true"
              pInputTextarea
              id="observacionesCliente">
            </textarea>
          </div>
        </div>
        <div class="flex justify-content-between pb-4 gap-2 pr-3">
          <p-button
            label="Paso anterior"
            icon="pi pi-angle-double-left"
            severity="secondary"
            (onClick)="prevCallback.emit()" />
          <p-button
            label="Siguiente"
            icon="pi pi-angle-double-right"
            iconPos="right"
            (onClick)="nextCallback.emit()" />
        </div>
      </ng-template>
    </p-stepperPanel>
    <!-- final de Datos del ciente -->

    <!-- inicio camposAval -->
    <p-stepperPanel header="Datos de aval">
      <ng-template
        pTemplate="content"
        let-prevCallback="prevCallback"
        let-nextCallback="nextCallback"
        let-index="index">
        <div class="flex flex-column">
          <div class="flex justify-content-center align-items-center pr-3">
            <p>¿Necesitas capturar datos de aval?</p>
            <p-inputSwitch
              formControlName="habilitarCamposAval"
              inputId="habilitarCamposAval"
              class="ml-3" />
          </div>
          <div *ngIf="camposAval">
            <div class="grid py-3 pr-3">
              <div class="col-12 sm:col-6 flex flex-column">
                <label for="nombreAval">Nombre aval</label>
                <input
                  formControlName="nombreAval"
                  pInputText
                  id="nombreAval"
                  aria-describedby="nombreAval-help" />
                <small
                  class="mb-2 text-red-500"
                  id="nombreAval-help"
                  [hidden]="esCampoOculto('nombreAval')"
                  >Nombre de aval requerido</small
                >
              </div>

              <div class="col-12 sm:col-6 flex flex-column">
                <label for="apellidoPaternoAval">Apellido paterno aval</label>
                <input
                  formControlName="apellidoPaternoAval"
                  pInputText
                  id="apellidoPaternoAval"
                  aria-describedby="apellidoPaternoAval-help" />
                <small
                  class="mb-2 text-red-500"
                  id="apellidoPaternoAval-help"
                  [hidden]="esCampoOculto('apellidoPaternoAval')"
                  >Apellido paterno del aval requerido</small
                >
              </div>
              <div class="col-12 sm:col-6 flex flex-column">
                <label for="apellidoMaternoAval">Apellido materno aval</label>
                <input
                  formControlName="apellidoMaternoAval"
                  pInputText
                  id="apellidoMaternoAval"
                  aria-describedby="apellidoMaternoAval-help" />
                <small
                  id="apellidoMaternoAval-help"
                  class="mb-2 text-red-500"
                  [hidden]="esCampoOculto('apellidoMaternoAval')"
                  >Apellido materno del aval requerido</small
                >
              </div>
              <div class="col-12 sm:col-6 flex flex-column">
                <label for="telefonoFijoAval">Telefono fijo</label>
                <p-inputMask
                  formControlName="telefonoFijoAval"
                  inputId="telefonoFijoAval"
                  mask="999-999-9999"
                  unmask="true"
                  showClear="true"
                  [autoClear]="false"
                  placeholder="999-999-9999"
                  [style]="{ width: '100%' }" />
                <small
                  id="telefonoFijoAval-help"
                  class="mb-2 text-red-500"
                  [hidden]="esCampoOculto('telefonoFijoAval')"
                  >Telefono fijo de aval requerido</small
                >
              </div>
              <div class="col-12 sm:col-6 flex flex-column">
                <label for="telefonoMovilAval">Telefono movil</label>
                <p-inputMask
                  formControlName="telefonoMovilAval"
                  inputId="telefonoMovilAval"
                  mask="999-999-9999"
                  minlength="10"
                  unmask="true"
                  showClear="true"
                  [autoClear]="false"
                  placeholder="999-999-9999"
                  [style]="{ width: '100%' }" />
                <small
                  id="telefonoMovilAval-help"
                  class="mb-2 text-red-500"
                  [hidden]="esCampoOculto('telefonoMovilAval')"
                  >Telefono movil de aval requerido</small
                >
              </div>
              <div class="col-12 sm:col-6 flex flex-column">
                <label for="emailAval">Correo electronico</label>
                <input
                  pInputText
                  formControlName="emailAval"
                  id="emailAval"
                  aria-describedby="emailAval-help" />
                <small
                  id="emailAval-help"
                  class="mb-2 text-red-500"
                  [hidden]="esCampoOculto('emailAval')"
                  ><ng-container
                    *ngIf="mainForm.get('emailAval')?.errors?.['required']">
                    Correo electronico requerido</ng-container
                  >
                  <ng-container
                    *ngIf="mainForm.get('emailAval')?.errors?.['invalidEmail']">
                    Formato de correo invalido</ng-container
                  ></small
                >
              </div>
              <div class="col-12 sm:col-6 flex flex-column">
                <label for="ocupacionAval">Ocupacion</label>
                <input
                  pInputText
                  formControlName="ocupacionAval"
                  id="ocupacionAval"
                  aria-describedby="ocupacionAval-help" />
                <small id="ocupacionAval-help" [hidden]="true">ocupacion</small>
              </div>
              <div class="col-12 sm:col-6 flex flex-column">
                <label for="curpAval">CURP</label>
                <p-inputMask
                  mask="aaaa-999999-aaaaaa-99"
                  inputId="curpAval"
                  unmask="true"
                  showClear="true"
                  formControlName="curpAval"
                  placeholder="0000-000000-000000-00"
                  [style]="{ width: '100%' }" />
                <small
                  id="curpAval-help"
                  class="mb-2 text-red-500"
                  [hidden]="esCampoOculto('curpAval')"
                  ><ng-container
                    *ngIf="mainForm.get('curpAval')?.errors?.['required']">
                    CURP de aval requerido</ng-container
                  >
                  <ng-container
                    *ngIf="mainForm.get('curpAval')?.errors?.['invalidCurp']">
                    Formato de CURP invalido</ng-container
                  >
                </small>
              </div>
              <div class="col-12 sm:col-6 flex flex-column">
                <label for="tipoCalleAval">Tipo de calle</label>
                <p-dropdown
                  inputId="tipoCalleAval"
                  id="tipoCalleAval"
                  formControlName="tipoCalleAval"
                  [options]="tiposCalle"
                  optionLabel="name"
                  [showClear]="true"
                  placeholder="Selecciona el tipo de calle"
                  [style]="{ width: '100%' }" />
                <small
                  id="tipoAval-help"
                  class="mb-2 text-red-500"
                  [hidden]="esCampoOculto('tipoCalleAval')"
                  >Selecciona un tipo de calle</small
                >
              </div>
              <div class="col-12 sm:col-6 flex flex-column">
                <label for="nombreCalleAval">Nombre de la calle</label>
                <input
                  pInputText
                  formControlName="nombreCalleAval"
                  id="nombreCalleAval"
                  aria-describedby="nombreCalleAval-help" />
                <small
                  id="nombreCalleAval-help"
                  class="mb-2 text-red-500"
                  [hidden]="esCampoOculto('nombreCalleAval')"
                  >Nombre de calle es requerido</small
                >
              </div>
              <div class="col-12 sm:col-6 flex flex-column">
                <label for="numeroExteriorAval">Número Exterior</label>
                <p-inputNumber
                  formControlName="numeroExteriorAval"
                  showClear="true"
                  [style]="{ width: '100%' }"
                  [inputStyle]="{ width: '100%' }"
                  inputId="numeroExteriorAval"
                  aria-describedby="numeroExteriorAval-help" />
                <small
                  id="numeroExteriorAval-help"
                  class="mb-2 text-red-500"
                  [hidden]="esCampoOculto('numeroExteriorAval')"
                  >El numero de exterior es requerido</small
                >
              </div>
              <div class="col-12 sm:col-6 flex flex-column">
                <label for="numeroInterior">Número Interior</label>
                <p-inputNumber
                  inputId="numeroInteriorAval"
                  formControlName="numeroInteriorAval"
                  showClear="true"
                  [style]="{ width: '100%' }"
                  [inputStyle]="{ width: '100%' }"
                  aria-describedby="numeroInterior-help" />
                <small id="numeroInterior-help" [hidden]="true"
                  >placeholder</small
                >
              </div>
              <div class="col-12 sm:col-6 flex flex-column">
                <label for="coloniaAval">Colonia</label>
                <input
                  pInputText
                  id="coloniaAval"
                  aria-describedby="coloniaAval-help"
                  formControlName="coloniaAval" />
                <small
                  id="coloniaAval-help"
                  class="mb-2 text-red-500"
                  [hidden]="esCampoOculto('coloniaAval')"
                  >La colonia es requerida</small
                >
              </div>
              <div class="col-12 sm:col-6 flex flex-column">
                <label for="municipioAval">Municipio</label>
                <input
                  pInputText
                  formControlName="municipioAval"
                  id="municipioAval"
                  aria-describedby="municipioAval-help" />
                <small
                  id="municipioAval-help"
                  class="mb-2 text-red-500"
                  [hidden]="esCampoOculto('municipioAval')"
                  >Municipio Requerido</small
                >
              </div>
              <div class="col-12 sm:col-6 flex flex-column">
                <label for="estadoAval">Entidad Federativa</label>
                <p-dropdown
                  [options]="estadosDeLaRepublica"
                  inputId="estadoAval"
                  id="estadoAval"
                  emptyFilterMessage="Sin resultados"
                  formControlName="estadoAval"
                  optionLabel="name"
                  [filter]="true"
                  filterBy="name"
                  [showClear]="true"
                  placeholder="Selecciona un estado"
                  [style]="{ width: '100%' }" />
                <small
                  id="estadoAval-help"
                  class="mb-2 text-red-500"
                  [hidden]="esCampoOculto('estadoAval')"
                  >El estado es requerido</small
                >
              </div>
              <div class="col-12 sm:col-6 flex flex-column">
                <label for="codigoPostalAval">Código postal</label>
                <p-inputNumber
                  inputId="codigoPostalAval"
                  formControlName="codigoPostalAval"
                  autoClear="false"
                  showClear="true"
                  useGrouping="false"
                  placeholder="99999"
                  [maxlength]="5"
                  [style]="{ width: '100%' }" />
                <small
                  id="codigoPostalAval-help"
                  class="mb-2 text-red-500"
                  [hidden]="esCampoOculto('codigoPostalAval')"
                  ><ng-container
                    *ngIf="
                      mainForm.get('codigoPostalAval')?.errors?.['required']
                    ">
                    Código postal requerido</ng-container
                  >
                  <ng-container
                    *ngIf="
                      mainForm.get('codigoPostalAval')?.errors?.[
                        'lenghtNotMatch'
                      ]
                    ">
                    El número debe de tener 5 digitos</ng-container
                  ></small
                >
              </div>
              <div class="col-12 flex flex-column gap-2">
                <label for="observacionesAval">Observaciones adicionales</label>
                <textarea
                  formControlName="observacionesAval"
                  rows="5"
                  cols="30"
                  autoResize="true"
                  pInputTextarea
                  id="observacionesAval">
                </textarea>
              </div>
            </div>
          </div>
        </div>
        <div class="flex justify-content-between pb-4 gap-2 pr-3">
          <p-button
            label="Paso anterior"
            icon="pi pi-angle-double-left"
            severity="secondary"
            (onClick)="prevCallback.emit()" />
          <p-button
            label="Siguiente"
            icon="pi pi-angle-double-right"
            iconPos="right"
            (onClick)="nextCallback.emit()" />
        </div>
      </ng-template>
    </p-stepperPanel>
    <!-- fin de camposAval -->

    <p-stepperPanel header="Documentación">
      <ng-template
        pTemplate="content"
        let-prevCallback="prevCallback"
        let-class="pl-0"
        let-index="index">
        <div class="flex flex-column mr-3 pt-3">
          <p-fileUpload
            #fileUpload
            customUpload="true"
            (uploadHandler)="onUpload($event)"
            showUploadButton="false"
            chooseLabel="Agregar"
            uploadLabel="Subir"
            mode="advanced"
            cancelLabel="Limpiar"
            maxFileSize="10485760"
            invalidFileLimitMessageDetail="Limite de {0} como máximo"
            invalidFileLimitMessageSummary="Limite de archivos exedido"
            invalidFileSizeMessageDetail="Máximo permitido es de {0}"
            invalidFileSizeMessageSummary="Tamaño excedido"
            fileLimit="5"
            multiple="true" />
        </div>
        <div class="flex justify-content-between py-4 gap-2 pr-3">
          <p-button
            label="Paso anterior"
            icon="pi pi-angle-double-left"
            severity="secondary"
            (onClick)="prevCallback.emit()" />
          <p-button
            type="submit"
            label="Enviar"
            icon="pi pi-cloud-upload"
            iconPos="right" />
        </div>
      </ng-template>
    </p-stepperPanel>
  </p-stepper>

  <p-toast
    [breakpoints]="{ '920px': { width: '100%', right: '0', left: '0' } }" />
  <p-confirmDialog
    key="positionDialog"
    [position]="position"
    rejectButtonStyleClass="p-button-outlined" />
</form>
<div>El formulario principal es valido? => {{ mainForm.valid }}</div>
<pre>{{ mainForm.value | json }}</pre>
