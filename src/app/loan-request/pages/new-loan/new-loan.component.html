<form [formGroup]="mainForm" (ngSubmit)="onSubmit()">
  <p-stepper orientation="vertical" style="max-width: 720px; margin: 0 auto">
    <!-- inicio de Cantidades y plazos -->
    <p-stepperPanel header="Cantidades y plazos">
      <ng-template
        pTemplate="content"
        let-index="index"
        let-nextCallback="nextCallback">
        <p>Todos los campos son obligatorios</p>
        <div class="grid py-3 pr-2" style="margin-right: 0">
          <!-- inicio de cantidades y plazos -->
          <div class="col-12 sm:col-4 flex flex-column">
            <label for="cantidad_prestada">Cantidad a prestar</label>
            <p-inputNumber
              inputId="cantidad_prestada"
              formControlName="cantidad_prestada"
              placeholder="Cantidad"
              mode="currency"
              currency="MXN"
              locale="es-MX"
              maxFractionDigits="0"
              showClear="true"
              [style]="{ width: '100%' }"
              [inputStyle]="{ width: '100%' }"
              (onInput)="onInputCantidad($event)" />
            <small
              id="cantidad-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('cantidad_prestada')">
              <ng-container
                *ngIf="mainForm.get('cantidad_prestada')?.errors?.['required']">
                Cantidad requerida</ng-container
              >
              <ng-container
                *ngIf="mainForm.get('cantidad_prestada')?.errors?.['min']">
                Cantidad minima de 1000</ng-container
              >
            </small>
          </div>
          <div class="col-12 sm:col-4 flex flex-column">
            <label for="plazo">Plazo</label>
            <p-dropdown
              inputId="plazo"
              id="plazo"
              formControlName="plazo"
              [options]="plazo"
              optionLabel="name"
              (onChange)="onPlazoChanged($event)"
              placeholder="Plazo de semanas"
              [style]="{ width: '100%' }" />
            <small
              id="plazo-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('plazo')"
              >Selecciona un plazo</small
            >
          </div>
          <div class="col-12 sm:col-4 flex flex-column">
            <label for="fecha_inicial">Fecha inicial</label>
            <p-calendar
              inputId="fecha_inicial"
              formControlName="fecha_inicial"
              placeholder="dd/mm/aaaa"
              [iconDisplay]="'input'"
              [showIcon]="true"
              [showButtonBar]="true"
              (onSelect)="calculaDiaDeLaSemana($event)"
              dateFormat="dd/mm/yy"
              readonlyInput="true"
              [minDate]="fechaMinima"
              [style]="{ width: '100%' }" />
            <small
              id="fecha_inicial-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('fecha_inicial')"
              >Fecha Inicial requerida</small
            >
          </div>

          <!-- inicio valores calculados -->
          <p-inputGroup [style]="{ width: '99%' }">
            <p-inputGroupAddon>
              <i class="pi pi-money-bill"></i>
              <span> Cada semana se pagarian:</span>
            </p-inputGroupAddon>
            <input
              pInputText
              disabled="true"
              id="cantidadSemanal"
              placeholder="Cantidad semanal"
              style="color: green; font-weight: bold"
              [value]="pagoSemanal" />
          </p-inputGroup>
          <p-inputGroup [style]="{ width: '99%' }">
            <p-inputGroupAddon>
              <i class="pi pi-percentage"></i>
              <span> Tasa de interes:</span>
            </p-inputGroupAddon>
            <input
              disabled="true"
              pInputText
              id="tasaDeInteres"
              placeholder="Tasa de interes"
              [value]="tasa_interes" />
          </p-inputGroup>
          <p-inputGroup [style]="{ width: '99%' }">
            <p-inputGroupAddon>
              <i class="pi pi-wallet"></i>
              <span> Total a pagar:</span>
            </p-inputGroupAddon>
            <input
              pInputText
              disabled="true"
              id="cantidadTotal"
              placeholder="Cantidad total a pagar"
              style="color: green; font-weight: bold"
              [value]="cantidad_pagar" />
          </p-inputGroup>
          <p-inputGroup [style]="{ width: '99%' }">
            <p-inputGroupAddon>
              <i class="pi pi-receipt"></i>
              <span> Pagaria los dias:</span>
            </p-inputGroupAddon>
            <input
              pInputText
              disabled="true"
              id="dia_semana"
              placeholder="Dia de la semana que se abona"
              [value]="dia_semana" />
          </p-inputGroup>
          <p-inputGroup [style]="{ width: '99%' }">
            <p-inputGroupAddon>
              <i class="pi pi-calendar-clock"></i>
              <span> Fecha final estimada:</span>
            </p-inputGroupAddon>
            <input
              type="text"
              pInputText
              id="fecha_final_estimada"
              placeholder="Fecha final estimada"
              disabled="true"
              [value]="fecha_final_estimada_string" />
          </p-inputGroup>
          <!-- final de valores calculados -->
        </div>
        <div class="flex justify-content-end pb-4 gap-2 pr-3">
          <p-button
            label="Siguiente"
            icon="pi pi-angle-double-right"
            iconPos="right"
            (onClick)="nextCallback.emit()" />
        </div>
      </ng-template>
    </p-stepperPanel>
    <!-- fin de Cantidades y plazos -->

    <!-- inicio de Datos del ciente -->
    <p-stepperPanel header="Datos del cliente">
      <ng-template
        pTemplate="content"
        let-prevCallback="prevCallback"
        let-nextCallback="nextCallback"
        let-index="index">
        <div class="flex justify-content-center align-items-center pr-3">
          <p>¿Necesitas buscar un cliente existente?</p>
          <p-inputSwitch
            inputId="habilitarCamposAval"
            class="ml-3"
            #switchBusqueda
            [ngSwitch]="customerSearchVisible"
            (onChange)="toggleCustomerSearch()" />
        </div>
        @if (customerSearchVisible) {
          <app-busqueda-clientes
            [parentForm]="mainForm"
            (visible)="toggleCustomerSearch()" />
        }
        <div formGroupName="formCliente" class="grid py-3 pr-3 mr-0">
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="nombre_cliente">Nombre cliente</label>
            <input
              formControlName="nombre_cliente"
              pInputText
              id="nombre_cliente"
              aria-describedby="nombre_cliente-help" />
            <small
              class="mb-2 text-red-500"
              id="nombre_cliente-help"
              [hidden]="esCampoOculto('formCliente.nombre_cliente')"
              >Nombre de cliente requerido</small
            >
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="apellido_paterno_cliente">Apellido paterno</label>
            <input
              formControlName="apellido_paterno_cliente"
              pInputText
              id="apellido_paterno_cliente"
              aria-describedby="apellido_paterno_cliente-help" />
            <small
              class="mb-2 text-red-500"
              id="apellido_paterno_cliente-help"
              [hidden]="esCampoOculto('formCliente.apellido_paterno_cliente')"
              >Apellido paterno requerido</small
            >
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="apellido_materno_cliente">Apellido materno</label>
            <input
              formControlName="apellido_materno_cliente"
              pInputText
              id="apellido_materno_cliente"
              aria-describedby="apellido_materno_cliente-help" />
            <small
              id="apellido_materno_cliente-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('formCliente.apellido_materno_cliente')"
              >Apellido materno requerido</small
            >
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="telefono_fijo_cliente">Telefono fijo</label>
            <p-inputMask
              formControlName="telefono_fijo_cliente"
              inputId="telefono_fijo_cliente"
              mask="999-999-9999"
              unmask="true"
              showClear="true"
              [autoClear]="false"
              placeholder="999-999-9999"
              [style]="{ width: '100%' }" />
            <small
              id="telefono_fijo_cliente-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('formCliente.telefono_fijo_cliente')"
              >Telefono fijo requerido</small
            >
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="telefono_movil_cliente">Telefono movil</label>
            <p-inputMask
              formControlName="telefono_movil_cliente"
              inputId="telefono_movil_cliente"
              mask="999-999-9999"
              unmask="true"
              showClear="true"
              [autoClear]="false"
              placeholder="999-999-9999"
              [style]="{ width: '100%' }" />
            <small
              id="telefono_movil_cliente-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('formCliente.telefono_movil_cliente')"
              >Telefono movil Requerido</small
            >
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="emailCliente">Correo electronico</label>
            <input
              pInputText
              formControlName="correo_electronico_cliente"
              id="emailCliente"
              aria-describedby="emailCliente-help" />
            <small
              id="correo_electronico_cliente-help"
              class="mb-2 text-red-500"
              [hidden]="
                esCampoOculto('formCliente.correo_electronico_cliente')
              ">
              <ng-container
                *ngIf="
                  mainForm.get('formCliente.correo_electronico_cliente')
                    ?.errors?.['invalidEmail']
                ">
                Formato de correo invalido</ng-container
              ></small
            >
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="ocupacion_cliente">Ocupacion</label>
            <input
              pInputText
              formControlName="ocupacion_cliente"
              id="ocupacion_cliente"
              aria-describedby="ocupacion_cliente-help" />
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="curp_cliente">CURP (Sólo Mayusculas y numeros)</label>
            <p-inputMask
              mask="aaaa-999999-aaaaaa-99"
              inputId="curp_cliente"
              characterPattern="[A-Z]"
              unmask="true"
              showClear="true"
              autoClear="false"
              formControlName="curp_cliente"
              placeholder="0000-000000-000000-00"
              [style]="{ width: '100%' }" />
            <small
              id="curp_cliente-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('formCliente.curp_cliente')">
              @if (
                mainForm.get('formCliente.curp_cliente')?.errors?.['required']
              ) {
                <ng-container> CURP requerido</ng-container>
              }
              @if (
                mainForm.get('formCliente.curp_cliente')?.errors?.[
                  'invalidCurp'
                ]
              ) {
                <ng-container> Formato de CURP invalido</ng-container>
              }
            </small>
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="tipo_calle_cliente">Tipo de calle</label>
            <p-dropdown
              inputId="tipo_calle_cliente"
              id="tipo_calle_cliente"
              formControlName="tipo_calle_cliente"
              [options]="tiposCalle"
              optionLabel="name"
              [showClear]="true"
              placeholder="Selecciona el tipo de calle"
              [style]="{ width: '100%' }" />
            <small
              id="tipo_calle_cliente-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('formCliente.tipo_calle_cliente')"
              >Selecciona un tipo de calle</small
            >
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="nombre_calle_cliente">Nombre de la calle</label>
            <input
              pInputText
              formControlName="nombre_calle_cliente"
              id="nombre_calle_cliente"
              aria-describedby="nombre_calle_cliente-help" />
            <small
              id="nombre_calle_cliente-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('formCliente.nombre_calle_cliente')"
              >Nombre de calle es requerido</small
            >
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="numero_exterior_cliente">Número Exterior</label>
            <input
              pInputText
              formControlName="numero_exterior_cliente"
              id="numero_exterior_cliente"
              pKeyFilter="int"
              aria-describedby="numero_exterior_cliente-help" />
            <small
              id="numero_exterior_cliente-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('formCliente.numero_exterior_cliente')"
              >El numero de exterior es requerido</small
            >
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="numero_interior_cliente">Número Interior</label>
            <input
              pInputText
              formControlName="numero_interior_cliente"
              id="numero_interior_cliente"
              inputId="numero_interior_cliente"
              showClear="true"
              aria-describedby="numero_interior_cliente-help" />
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="colonia_cliente">Colonia</label>
            <input
              pInputText
              id="colonia_cliente"
              aria-describedby="colonia_cliente-help"
              formControlName="colonia_cliente" />
            <small
              id="colonia_cliente-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('formCliente.colonia_cliente')"
              >La colonia es requerida</small
            >
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="municipio_cliente">Municipio</label>
            <input
              pInputText
              formControlName="municipio_cliente"
              id="municipio_cliente"
              aria-describedby="municipio_cliente-help" />
            <small
              id="municipio_cliente-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('formCliente.municipio_cliente')"
              >Municipio Requerido</small
            >
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="estado_cliente">Entidad Federativa</label>
            <p-dropdown
              [options]="estadosDeLaRepublica"
              inputId="estado_cliente"
              id="estado_cliente"
              emptyFilterMessage="Sin resultados"
              formControlName="estado_cliente"
              optionLabel="name"
              [filter]="true"
              filterBy="name"
              [showClear]="true"
              placeholder="Selecciona un estado"
              [style]="{ width: '100%' }" />
            <small
              id="estado_cliente-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('formCliente.estado_cliente')"
              >El estado es requerido</small
            >
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="cp_cliente">Código postal</label>
            <input
              pInputText
              formControlName="cp_cliente"
              id="cp_cliente"
              inputId="cp_cliente"
              autoClear="false"
              showClear="true"
              pKeyFilter="int"
              placeholder="99999"
              [maxlength]="5"
              aria-describedby="cp_cliente-help" />
            <small
              id="cp_cliente-help"
              class="mb-2 text-red-500"
              [hidden]="esCampoOculto('formCliente.cp_cliente')"
              ><ng-container
                *ngIf="
                  mainForm.get('formCliente.cp_cliente')?.errors?.['required']
                ">
                Código postal requerido</ng-container
              >
              <ng-container
                *ngIf="
                  mainForm.get('formCliente.cp_cliente')?.errors?.[
                    'lenghtNotMatch'
                  ]
                ">
                El número debe de tener 5 digitos</ng-container
              ></small
            >
          </div>
          <div class="col-12 sm:col-6 flex flex-column">
            <label for="referencias_dom_cliente"
              >Referencias del domicilio</label
            >
            <input
              pInputText
              formControlName="referencias_dom_cliente"
              id="referencias_dom_cliente"
              aria-describedby="referencias_dom_cliente-help" />
          </div>
        </div>
        <div class="flex justify-content-between pb-4 gap-2 pr-3">
          <p-button
            label="Paso anterior"
            icon="pi pi-angle-double-left"
            severity="secondary"
            (onClick)="prevCallback.emit()" />
          <p-button
            label="Siguiente"
            icon="pi pi-angle-double-right"
            iconPos="right"
            (onClick)="nextCallback.emit()" />
        </div>
      </ng-template>
    </p-stepperPanel>
    <!-- final de Datos del ciente -->

    <!-- inicio camposAval -->
    <p-stepperPanel header="Datos de aval">
      <ng-template
        pTemplate="content"
        let-prevCallback="prevCallback"
        let-nextCallback="nextCallback"
        let-index="index">
        <div class="flex flex-column">
          <div formGroupName="formAval" class="grid py-3 pr-3 mr-0">
            <div class="col-12 sm:col-6 flex flex-column">
              <label for="nombre_aval">Nombre aval</label>
              <input
                formControlName="nombre_aval"
                pInputText
                id="nombre_aval"
                aria-describedby="nombre_aval-help" />
              <small
                class="mb-2 text-red-500"
                id="nombre_aval-help"
                [hidden]="esCampoOculto('formAval.nombre_aval')"
                >Nombre de aval requerido</small
              >
            </div>
            <div class="col-12 sm:col-6 flex flex-column">
              <label for="apellido_paterno_aval">Apellido paterno aval</label>
              <input
                formControlName="apellido_paterno_aval"
                pInputText
                id="apellido_paterno_aval"
                aria-describedby="apellido_paterno_aval-help" />
              <small
                class="mb-2 text-red-500"
                id="apellido_paterno_aval-help"
                [hidden]="esCampoOculto('formAval.apellido_paterno_aval')"
                >Apellido paterno del aval requerido</small
              >
            </div>
            <div class="col-12 sm:col-6 flex flex-column">
              <label for="apellido_materno_aval">Apellido materno aval</label>
              <input
                formControlName="apellido_materno_aval"
                pInputText
                id="apellido_materno_aval"
                aria-describedby="apellido_materno_aval-help" />
              <small
                id="apellido_materno_aval-help"
                class="mb-2 text-red-500"
                [hidden]="esCampoOculto('formAval.apellido_materno_aval')"
                >Apellido materno del aval requerido</small
              >
            </div>
            <div class="col-12 sm:col-6 flex flex-column">
              <label for="telefono_fijo_aval">Telefono fijo</label>
              <p-inputMask
                formControlName="telefono_fijo_aval"
                inputId="telefono_fijo_aval"
                mask="999-999-9999"
                unmask="true"
                showClear="true"
                [autoClear]="false"
                placeholder="999-999-9999"
                [style]="{ width: '100%' }" />
              <small
                id="telefono_fijo_aval-help"
                class="mb-2 text-red-500"
                [hidden]="esCampoOculto('formAval.telefono_fijo_aval')"
                >Telefono fijo de aval requerido</small
              >
            </div>
            <div class="col-12 sm:col-6 flex flex-column">
              <label for="telefono_movil_aval">Telefono movil</label>
              <p-inputMask
                formControlName="telefono_movil_aval"
                inputId="telefono_movil_aval"
                mask="999-999-9999"
                minlength="10"
                unmask="true"
                showClear="true"
                [autoClear]="false"
                placeholder="999-999-9999"
                [style]="{ width: '100%' }" />
              <small
                id="telefono_movil_aval-help"
                class="mb-2 text-red-500"
                [hidden]="esCampoOculto('formAval.telefono_movil_aval')"
                >Telefono movil de aval requerido</small
              >
            </div>
            <div class="col-12 sm:col-6 flex flex-column">
              <label for="correo_electronico_aval">Correo electronico</label>
              <input
                pInputText
                formControlName="correo_electronico_aval"
                id="correo_electronico_aval"
                aria-describedby="correo_electronico_aval-help" />
              <small
                id="correo_electronico_aval-help"
                class="mb-2 text-red-500"
                [hidden]="esCampoOculto('formAval.correo_electronico_aval')">
                <ng-container
                  *ngIf="
                    mainForm.get('formAval.correo_electronico_aval')?.errors?.[
                      'invalidEmail'
                    ]
                  ">
                  Formato de correo invalido</ng-container
                ></small
              >
            </div>
            <div class="col-12 sm:col-6 flex flex-column">
              <label for="ocupacion_aval">Ocupacion</label>
              <input
                pInputText
                formControlName="ocupacion_aval"
                id="ocupacion_aval"
                aria-describedby="ocupacion_aval-help" />
            </div>
            <div class="col-12 sm:col-6 flex flex-column">
              <label for="curp_aval">CURP (Sólo Mayusculas y numeros)</label>
              <p-inputMask
                mask="aaaa-999999-aaaaaa-99"
                inputId="curp_aval"
                characterPattern="[A-Z]"
                unmask="true"
                autoClear="false"
                showClear="true"
                formControlName="curp_aval"
                placeholder="0000-000000-000000-00"
                [style]="{ width: '100%' }" />
              <small
                id="curp_aval-help"
                class="mb-2 text-red-500"
                [hidden]="esCampoOculto('formAval.curp_aval')"
                ><ng-container
                  *ngIf="
                    mainForm.get('formAval.curp_aval')?.errors?.['required']
                  ">
                  CURP de aval requerido</ng-container
                >
                <ng-container
                  *ngIf="
                    mainForm.get('formAval.curp_aval')?.errors?.['invalidCurp']
                  ">
                  Formato de CURP invalido</ng-container
                >
              </small>
            </div>
            <div class="col-12 sm:col-6 flex flex-column">
              <label for="tipo_calle_aval">Tipo de calle</label>
              <p-dropdown
                inputId="tipo_calle_aval"
                id="tipo_calle_aval"
                formControlName="tipo_calle_aval"
                [options]="tiposCalle"
                optionLabel="name"
                [showClear]="true"
                placeholder="Selecciona el tipo de calle"
                [style]="{ width: '100%' }" />
              <small
                id="tipoAval-help"
                class="mb-2 text-red-500"
                [hidden]="esCampoOculto('formAval.tipo_calle_aval')"
                >Selecciona un tipo de calle</small
              >
            </div>
            <div class="col-12 sm:col-6 flex flex-column">
              <label for="nombre_calle_aval">Nombre de la calle</label>
              <input
                pInputText
                formControlName="nombre_calle_aval"
                id="nombre_calle_aval"
                aria-describedby="nombre_calle_aval-help" />
              <small
                id="nombre_calle_aval-help"
                class="mb-2 text-red-500"
                [hidden]="esCampoOculto('formAval.nombre_calle_aval')"
                >Nombre de calle es requerido</small
              >
            </div>
            <div class="col-12 sm:col-6 flex flex-column">
              <label for="numero_exterior_aval">Número Exterior</label>
              <input
                pInputText
                formControlName="numero_exterior_aval"
                showClear="true"
                inputId="numero_exterior_aval"
                aria-describedby="numero_exterior_aval-help" />
              <small
                id="numero_exterior_aval-help"
                class="mb-2 text-red-500"
                [hidden]="esCampoOculto('formAval.numero_exterior_aval')"
                >El numero de exterior es requerido</small
              >
            </div>
            <div class="col-12 sm:col-6 flex flex-column">
              <label for="numero_interior_aval">Número Interior</label>
              <input
                pInputText
                formControlName="numero_interior_aval"
                id="numero_interior_aval"
                inputId="numero_interior_aval"
                showClear="true"
                aria-describedby="numero_interior_aval-help" />
            </div>
            <div class="col-12 sm:col-6 flex flex-column">
              <label for="colonia_aval">Colonia</label>
              <input
                pInputText
                id="colonia_aval"
                aria-describedby="colonia_aval-help"
                formControlName="colonia_aval" />
              <small
                id="colonia_aval-help"
                class="mb-2 text-red-500"
                [hidden]="esCampoOculto('formAval.colonia_aval')"
                >La colonia es requerida</small
              >
            </div>
            <div class="col-12 sm:col-6 flex flex-column">
              <label for="municipio_aval">Municipio</label>
              <input
                pInputText
                formControlName="municipio_aval"
                id="municipio_aval"
                aria-describedby="municipio_aval-help" />
              <small
                id="municipio_aval-help"
                class="mb-2 text-red-500"
                [hidden]="esCampoOculto('formAval.municipio_aval')"
                >Municipio Requerido</small
              >
            </div>
            <div class="col-12 sm:col-6 flex flex-column">
              <label for="estado_aval">Entidad Federativa</label>
              <p-dropdown
                [options]="estadosDeLaRepublica"
                inputId="estado_aval"
                id="estado_aval"
                emptyFilterMessage="Sin resultados"
                formControlName="estado_aval"
                optionLabel="name"
                [filter]="true"
                filterBy="name"
                [showClear]="true"
                placeholder="Selecciona un estado"
                [style]="{ width: '100%' }" />
              <small
                id="estado_aval-help"
                class="mb-2 text-red-500"
                [hidden]="esCampoOculto('formAval.estado_aval')"
                >El estado es requerido</small
              >
            </div>
            <div class="col-12 sm:col-6 flex flex-column">
              <label for="cp_aval">Código postal</label>
              <input
                pInputText
                formControlName="cp_aval"
                id="cp_aval"
                inputId="cp_aval"
                autoClear="false"
                showClear="true"
                pKeyFilter="int"
                placeholder="99999"
                [maxlength]="5"
                aria-describedby="cp_aval-help" />
              <small
                id="cp_aval-help"
                class="mb-2 text-red-500"
                [hidden]="esCampoOculto('formAval.cp_aval')">
                <ng-container
                  *ngIf="
                    mainForm.get('formAval.cp_aval')?.errors?.['required']
                  ">
                  Código postal requerido</ng-container
                >
                <ng-container
                  *ngIf="
                    mainForm.get('formAval.cp_aval')?.errors?.['lenghtNotMatch']
                  ">
                  El número debe de tener 5 digitos</ng-container
                >
              </small>
            </div>
            <div class="col-12 sm:col-6 flex flex-column">
              <label for="referencias_dom_aval"
                >Referencias del domicilio</label
              >
              <input
                pInputText
                formControlName="referencias_dom_aval"
                id="referencias_dom_aval"
                aria-describedby="referencias_dom_aval-help" />
            </div>
          </div>
        </div>
        <div class="flex justify-content-between pb-4 gap-2 pr-3">
          <p-button
            label="Paso anterior"
            icon="pi pi-angle-double-left"
            severity="secondary"
            (onClick)="prevCallback.emit()" />
          <p-button
            label="Siguiente"
            icon="pi pi-angle-double-right"
            iconPos="right"
            (onClick)="nextCallback.emit()" />
        </div>
      </ng-template>
    </p-stepperPanel>
    <!-- fin de camposAval -->

    <!-- inicio Documentación -->
    <p-stepperPanel header="Documentación">
      <ng-template
        pTemplate="content"
        let-prevCallback="prevCallback"
        let-class="pl-0"
        let-index="index">
        <div class="flex flex-column mr-3 pt-3">
          <p-fileUpload
            #fileUpload
            customUpload="true"
            (uploadHandler)="onUpload($event)"
            showUploadButton="false"
            chooseLabel="Agregar"
            uploadLabel="Subir"
            mode="advanced"
            cancelLabel="Limpiar"
            maxFileSize="10485760"
            invalidFileLimitMessageDetail="Limite de {0} como máximo"
            invalidFileLimitMessageSummary="Limite de archivos exedido"
            invalidFileSizeMessageDetail="Máximo permitido es de {0}"
            invalidFileSizeMessageSummary="Tamaño excedido"
            fileLimit="5"
            multiple="true" />
        </div>
        <div class="flex flex-column gap-2 mt-3 mr-3">
          <label for="observaciones">Observaciones adicionales</label>
          <textarea
            formControlName="observaciones"
            rows="5"
            cols="30"
            autoResize="true"
            pInputTextarea
            id="observaciones">
          </textarea>
        </div>
        <div class="flex justify-content-between py-4 gap-2 pr-3">
          <p-button
            label="Paso anterior"
            icon="pi pi-angle-double-left"
            severity="secondary"
            (onClick)="prevCallback.emit()" />
          <p-button
            type="submit"
            label="Enviar"
            [loading]="uploading"
            [disabled]="uploadSuccessfull"
            icon="pi pi-cloud-upload"
            iconPos="right" />
        </div>
      </ng-template>
    </p-stepperPanel>

    <!-- fin Documentación -->
  </p-stepper>

  <p-toast
    [breakpoints]="{ '920px': { width: '100%', right: '0', left: '0' } }" />
  <p-confirmDialog
    key="positionDialog"
    [position]="position"
    rejectButtonStyleClass="p-button-outlined" />
</form>
<pre>{{ mainForm.value | json }}</pre>
